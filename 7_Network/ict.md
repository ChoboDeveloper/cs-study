# 통신공학

<br>

### 데이터 전송방식

**직렬/병렬**

* 직렬
  * 하나의 비트열을 순차적으로 전송(모뎀)
  * 전송속도가 느리고 장거리 전송에 사용
* 병렬
  * 다수의 비트열을 전송

**동기식/비동기식**

* 동기식
  * 여러 블록단위로 전송
  * 블록 앞부분에 들어가는 제어정보를 **프리앰블(preamble)**이라 하고, 블록 뒷부분에 들어가는 제어정보를 **포스트앰블(postamble)**이라 한다.
  * **문자 전송방식**
    * **BSC**
  * **비트 전송방식**
    * **HDLC**
* 비동기식
  * 한 번에 한 문자씩 전송하는 방식
  * **시작비트, 정지비트**를 사용하는 방식

---

### BSC

| **문자**                       | **기능**                                                 |
| ------------------------------ | -------------------------------------------------------- |
| SYN(SYNchronous idle)          | 문자 동기                                                |
| SOH(Start Of Heading)          | 헤딩의 시작                                              |
| STX(Start of TeXt)             | 본문의 시작 및 헤딩의 종료                               |
| ETX(End of TeXt)               | 본문의 종료                                              |
| ETB(End of Transmission Block) | 블록의 종료                                              |
| EOT(End Of Transmission)       | 전송 종료 및 데이터 링크의 해제                          |
| **ENQ**(ENQuiry)               | 상대편에 데이터 **링크 설정 및 응답을 요구**             |
| **DLE**(Data Link Escape)      | 전송 제어 문자 앞에 삽입하여 **전송 제어 문자임을 알림** |
| ACK(ACKnowledge)               | 수신된 메시지에 대한 긍정 응답                           |
| NAK(Negative AcKnowledge)      | 수신된 메시지에 대한 부정 응답                           |

---

### HDLC



![image](https://user-images.githubusercontent.com/75229881/155316922-2a9be9b9-a004-484c-9589-e6d6e1a32ba8.png)

* Flag
* 주소부
* 제어부

  * 정보 프레임 (Information,I-frame)
    * 제어필드 첫 비트가 '0'인 경우
    * `사용자 정보 + 제어 정보`를 실음
  * 감시 프레임 (Supervisory,S-frame) 
    * 제어필드 '10'인 경우
    * 오직 `제어 정보` 만 실음
  * 비 번호 프레임 (Unnumbered,U-frame)
    * 제어필드 '11'인 경우
    * `링크관리정보`를 실음

```
비트스터핑

* 데이터를 실은 프레임들의 경계를 구분하기 위해 통상 특정한 비트 배열(Preamble) 갖는
플래그 바이트(01111110)라 불리는 경계를 나타내는 바이트를 사용하는데,
만일 실제 데이터 내부에 동일한 비트 배열이 있게되는 경우를 방지하기 위해
의도적으로 5개의 1을 보내면서 다음 비트에 0을 삽입하는 비트 채우기(bit stuffing) 실시

* 즉, 동기를 맞추기 위해 비트를 채우는 방식
```

<br>

* 모드
  * NRM, 정규응답모드
    * 불균형적 링크 구성
    * 주국이 세션을 열고, 종국들은 단지 음답만 함
  * ABM, 비동기평형모드
    * 균형적 링크 구성
    * 각 국이 주국이자 종국으로 서로 대등하게 균형적으로 명령과 응답하며 동작
  * ARM, 비동기응답모드
    * 종국도 전송할 필요가 있는 특수한 경우에만 사용
    * 종국은 주국의 허가없이 응답 가능

---

### 지연

![image](https://user-images.githubusercontent.com/75229881/161549529-44790d78-b441-4faa-b92c-4c04c9e28f85.png)

**Processing Delay (처리 지연)**

들어온 **패킷들의 IP 헤더를 확인해서 그에 따른 작업을 처리하는데에 걸리는 시간**을 뜻합니다. 그 작업의 예시로는 오류 검사, 목적지 결정등이 있습니다.

**Queueing Delay (큐잉 지연)**

들어온 패킷들은 바로 라우터를 통과하는 것이 아닙니다. 라우터는 한번에 한 개의 패킷을 처리할 수 있기 때문에, 먼저 들어온 패킷이 처리될 때 까지 기다려야 할 수 있습니다. 그렇게 패킷이 **큐에서 다른 패킷들의 작업이 끝나길 기다리는 시간**을 뜻합니다. 네트워크 상황에따라 밀려있는 패킷이 적을 수도, 많을 수도 있기 때문에 다른 지연들에 비해 편차가 큰 지연입니다. 또한, 큐의 크기는 고정되어 있어서 일시적으로 너무 많은 패킷이 들어와서 큐의 범위를 초과하면 패킷 손실이 일어나기도 합니다.

**Transmission Delay (전송 지연)**

전달하고자 하는 **패킷의 비트들이 논리회로를 통과할 때 까지 발생하는 지연**을 뜻합니다. 채널의 전송 속도에 따라 달라지며 (네트워크 장비의 데이터 전송 속도에 따라 달라집니다.) Server-Client 간의 거리와는 무관합니다.

 **Propagation Delay (전파 지연)**

처음에 말했듯이, 패킷도 결국 물리적인 통신선로에서 신호가 이동하는 방식으로 전파됩니다. 이 때, **통신선로의 신호 전송 속도에 따른 물리적인 지연**을 뜻합니다. 따라서, 통신선의 종류에 따라 크게 달라지며, 거리에도 영향을 받습니다. 하지만, 대부분 일정한 값을 가지고, 빛의 속도는 매우 빠르기 때문에 다른 지연에 비해 매우작은 값이 산출됩니다.

---

### 통신 공식

```
shannon 공식) C  =  Blog₂(1 + S/N), (B는 대역폭 S/N은 잡음비)
SNR 공식) SNR[db] = 10log(S/N)
```

---

### 5G

* Zing
  * 10 cm 내의 근접거리에서 기가급의 대용량 콘텐츠를 복잡한 접속 절차 없이 손쉽고 빠르게 송·수신할 수 있는 초고속 근접통신 기술
* MHN
  * 달리는 지하철 안에서 초고속 모바일 인터넷 서비스를 제공하는 차세대 이동통신 기술
* 빔 포밍
  * 빔포밍이 가지는 일반적인 이미지는 이렇다. 안테나에서 발사되는 전파는 360도 모든 방향으로, 원형으로 퍼진다. 그걸 한쪽으로 모아서, 필요한 기기 쪽으로 쏴준다. 사방으로 퍼질 전파를 한쪽으로 모으니, 힘도 세고 데이터도 잘 주고받을 수 있게 된다. 누군가는 이걸 원형 풍선을 양옆에서 힘줘서 눌러 타원형으로 만드는 형태로 설명하기도 한다.
* 스몰셀
  * 반경 1km 내에서 마치 무선 AP(Wireless Access Point)처럼 붙여 사용하는 소형 기지국을 말한다
* 펨토셀
  * 반경 10m 정도의 가정이나 소규모 사무실을 위한 초소형, 저전력의 이동통신 기지국

---

### 대역확산 방식

**FHSS**

* 호핑 코드에 따라 순간적으로 한 주파수로 호핑(Hopping)되어 그 주파수에서 아주  짧은 시간동안 전송하고, 다시 다른 주파수로 호핑되며 전과 동일한 과정을 반복

**DSSS**

* 원래의 신호에 **주파수가 높은 디지털 신호를 곱(XOR)**하여, 원 신호의 **대역폭을 확산**시키는, 대역확산(Spread Spectrum) 변조방식
* CDMA가 DSSS에 의한 다중접속 방식

---

### 오류검출

**Checksum**

* **Checksum 바이트**는 단위 비트로 짤라서 **1. 각자 SUM** 하고 **2. Carry 부분 Wrap-around** **3. 1의 보수를 취함**

* 송신측) 기존 데이터 + Checksum 바이트 송신

  1. Pseudo Header, TCP Segment의 모든 값을 16비트 단위로 나눈다.

     (예를 들어 12바이트(96비트)인 Pseudo Header의 경우 6개의 16비트 값으로 나눌 수 있다.)

  2. TCP Header의 **Checksum 필드는 0x00으로 초기화** 하고 계산한다. (송신이든 수신이든)

  3. 각각의 합마다 발생하는 **carry는 모두 wrap around** 하면서 전부 더해준다.

     (아래에 8비트 합 연산시 wrap around를 하는 예제를 그려놨다. carry를 계속 더해주는 방식을 말한다.)

  4. **계산 결과에 1의 보수를 취한다.** 

* 수신측) 모두 더해서 1이면 오류없음, Carry 발생 시 Wrap-around(뒤로보냄)

---

### 오류정정

**FEC(전진 에러수정)**

* ARQ 방식에 비해 더 많은 수의 잉여 Bit들을 추가해서 에러 검출뿐 아니라 에러 정정 기능까지도 포함
* 잉여 bit가 추가로 발생, 전송효율은 떨어질 수 있음
* **CRC**
* **Hamming Code**

**BEC(후진 에러수정)**

* 송신측이 에러 검출이 가능한 부가적인 정보를 메세지에 첨가시켜 전송하고, 수신측이 이를 토대로 에러를 발견시 재전송을 송신측에 요구하는 방식
* **ARQ**

---

### 무선랜의 종류
**IEEE 802.11**

- IEEE 802.11은 흔히 무선랜, 와이파이(Wi-Fi)**라고 부르는 무선 근거리 통신망(Local Area Network)을 위한 컴퓨터 무선 네트워크에 사용되는 기술로, IEEE의 LAN/MAN 표준 위원회 (IEEE 802)의 11번째 워킹 그룹에서 개발된 표준 기술을 의미한다.

IEEE 802.11b (Wi-Fi 1)

- 802.11b는 802.11 규격을 기반으로 더욱 발전시킨 기술로, 최고 전송속도는 11 Mbps이나 실제로는 **CSMA/CA** 기술의 구현 과정에서 6-7 Mbps 정도의 효율을 나타내는 것으로 알려져 있다.
- 표준이 확정되자마자 시장에 다양한 관련 제품이 등장했고, 이전 규격에 비해 현실적인 속도를 지원해 기업이나 가정 등에 유선 네트워크를 대체하기 위한 목적으로 폭넓게 보급되었으며, 공공장소 등에서 유무상 서비스를 제공하는 업체도 생겨났다.

IEEE 802.11a (Wi-Fi 2)

- 세 번째로 등장한 전송방식인 802.11a는 5 GHz 대역의 전파를 사용하는 규격으로, **OFDM** 기술을 사용해 최고 54 Mbps까지의 전송 속도를 지원한다.
- 5 GHz 대역은 2.4 GHz 대역에 비해 다른 통신기기(무선 전화기, 블루투스 기기 등)와의 간섭이 적고, 더 넓은 전파 대역을 사용할 수 있다는 장점이 있지만, 신호의 특성상 장애물이나 도심 건물 등 주변 환경의 영향을 쉽게 받고, 2.4 GHz 대역에서 54 Mbps 속도를 지원하는 802.11g 규격이 등장하면서 현재는 널리 쓰이지 않고 있다.

IEEE 802.11g (Wi-Fi 3)

- IEEE 802.11.a와 같은 54 Mbps의 속도를 지원하지만 2.4 GHz 주파수를 사용하는 규격이다. 속도도 빠르며, 저주파수를 사용하기 때문에 주변 지형지물의 간섭을 적게 받는다.
  속도는 20 Mbps로 떨어지지만 같은 주파수를 사용하는 IEEE 802.11.b와 호환해서 사용할 수 있다는 장점이 있어서 IEEE 802.11.b를 대체해서 많이 사용되었다.

**IEEE 802.11n (Wi-Fi 4)**

- 2.4 GHz와 5 GHz 주파수를 모두 사용하며 속도도 600 Mbps까지 지원하는 등 당시 100 Mbps를 지원하던 유선 LAN의 속도를 따라잡기 위해 개발된 표준이다.

IEEE 802.11ac (Wi-Fi 5)

- 5 GHz 주파수만 사용하여 433 Mbps~3.7 Gbps라는 빠른 속도를 지원한다. 우리나라에서는 **기가 와이파이**라는 이름으로 2010년대 초반에 알려졌다.
- 이 규격에 따르면 다중 단말의 무선랜 속도는 최소 1 Gbit/s, 최대 단일 링크 속도는 최소 500 Mbit/s 까지 가능하게 된다. 이는 더 넓은 무선 주파수 대역폭(최대 160 MHz), 더 많은 MIMO 공간적 스트림(최대 8 개), 다중 사용자 MIMO, 그리고 높은 밀도의 변조(최대 256 QAM) 등 802.11n에서 받아들인 무선 인터페이스 개념을 확장하였다.

IEEE 802.11ad

* **빔포밍(beamforming) 기술 이용**, 개방된 공간의 근거리 기기 사이에서만 사용 가능

IEEE 802.11ax (Wi-Fi 6)

- 802.11ax는 1 GHz ~ 6 GHz 사이의 모든 ISM 대역에서 802.11에 사용할 수 있을 때 이미 할당된 2.4 GHz~5 GHz 대역과 함께 작동하도록 설계되었다.
- 다중 접속 환경에 최적화되어 공공 와이파이 환경에서도 최상의 인터넷 품질을 제공하는 것을 목표로 IEEE에서 고안한 Wi-Fi 규격이다.

802.11be (Wi-Fi 7)

- Wi-Fi 7은 현재 IEEE에서 연구 중인 IEEE 802.11be 표준을 기반으로 하는 차세대 Wi-Fi 규격이다. 
- EHT (Extremely High Throughput)이라는 별칭으로도 불린다.

---

### IEEE

* IEEE 802.2
  * 데이터 링크 계층의 상위 부분인 LLC 프로토콜 정의

* IEEE 802.3 
  * 이더넷인 CSMA/CD 방식

* IEEE 802.4
  * 토큰 버스 방식

* IEEE 802.5
  * 토큰 링 방식

---

### 데이터 전송 속도

* bps는 초당 전송되는 **비트 수**를 나타내며
* baud는 초당 전송되는 **단위 신호의 수**를 나타낸다.
* 예제문제
  * QAM(Quadrature Amplitude Modulation)방식에서 4개의 위상과 2개의 진폭으로 구성되고 2400baud일 때 전송 속도(bps)는?
  * 3bit 필요, 정답은 7200bps
  * 참고
    * 4위상 2진폭 -> 3bit씩 전송
    * 8위상 2진폭 -> 4bit씩 전송
    * 16위상 2진폭 -> 5bit씩 전송
    * 모노비트(Monobit) : 1비트
    * 디비트(Dibit) : 2비트
    * 트리비트(Tribit) : 3비트
    * 쿼드비트(Quadbit) : 4비트

---

### IPv4

**헤더구조**

![img](http://www.ktword.co.kr/img_data/1859_1.jpg)

* 최소 20바이트(Destination IP Address 까지)



---

### IPv6

**헤더구조**

![image](https://user-images.githubusercontent.com/75229881/152361964-908caed8-1a0f-4522-b480-22b2234d854d.png)

**IPv6 전환**

* 터널링
  * 기존의 IPv6에서 다른 IPv6로 지나가는 가상의 통로를 만들고 통로를 지나가기 위해 패킷을 IPv4로 **캡슐화**하여 전송한다.
* 듀얼 스택
  * **두 가지 모두를 지원**하는 방식이며 가장 안정적인 방법
* 헤더 변환
  * **IPv4 주소를 IPv6 주소로 변환 또는 그 반대로 변환하여 통신**하는 방식

---

### 변조 관련

* 심볼 오류
  * ASK < FSK < PSK < QAM 순으로 심볼 오율이 감소
    * M진 심볼오율 = 2진 심볼오율 * log<sub>2</sub>M
* 비트오율
  * Eb/No 값을 기준으로 하며 QPSK나 BPSK나 같다.
* 전송속도
  * 전송대역폭(B)과 전송속도(bps)의 관계는 R = B * log<sub>2</sub>M
    * QPSK는 BPSK의 2배 속도이다(bps가 같을 경우)
* 대역폭 효율
  * 비트율/전송대역폭(R/B)
    * log<sub>2</sub>M


---

### 부호화 방식

![image](https://user-images.githubusercontent.com/75229881/161551842-7dc00a36-a90f-4751-9603-2e3b912255b2.png)

---

### 네트워크 장비

**1계층 장비 (물리계층 : 실제 장비들을 연결하기 위한 연결 장치)**

| **장비**           | **설명**                                                     |
| :----------------- | ------------------------------------------------------------ |
| **허브**           | 여러 대의 컴퓨터를 연결하여 네트워크로 보내거나, 하나의 네트워크로 수신된 정보를 여러 대의 컴퓨터로 송신하기 위한 장비 |
| **리피터        ** | 디지털 신호를 증폭시켜주는 역할, 신호가 약해지지 않고, 컴퓨터로 수신되도록 하는 장비 |

<br>

**2계층 장비 (데이터 링크계층 : 오류와 흐름 제어 -> 신뢰성 있는 데이터 전송)**

| **장비**        | **설명**                                                     |
| --------------- | ------------------------------------------------------------ |
| **브리지**      | **두 개의 근거리 통신망(LAN)을 서로 연결해주는 통신망 연결 장치** |
| **L2 스위치**   | **느린 전송속도의 브리지, 허브의 단점을 개선하기 위한 장치**<br> - 출발지에서 들어온 프레임(Frame)을  목적지 MAC 주소 기반으로 빠르게 전송<br> - L2, L3, L4 스위치는 OSI 중 어떤 계층에서 수행되는가에 따라서 구분된다.<br> - 세 가지 방식 중 하나를 사용<br>  1) **Store and Fowarding** : 데이터를 전부 받은 후 다음 처리를 하는 방식<br>  2) **Cut Through** : 데이터의 목적지 주소만 확인 후 바로 전송 처리하는 방식<br/>  3) **Fragment Free** : 프레임의 앞 64바이트만 읽어 에러를 처리하고, 목적지 포트로 전송하는 방식 |
| **NIC**         | - 외부 네트워크와 접속하여, 빠른 속도로 데이터를 주고받을 수 있게 컴퓨터 내에 설치되는 장치, 랜카드 |
| **스위칭 허브** | - **스위치 기능을 가진 허브**<br/> - 사용되는 대부분의 허브는 스위칭 허브!<br/>cf) 허브 : 여러 대의 컴퓨터를 연결하여 네트워크로 보내거나, 하나의 네트워크로 수신된 정보를 여러 대의 컴퓨터로 송신하기 위한 장비 |

 

 

**3계층 장비 (네트워크 계층 : 올바른 경로를 선택하도록 지원)**

| **장비**                | **설명**                                                     |
| ----------------------- | ------------------------------------------------------------ |
| **라우터**              | **- LAN과 LAN을 연결하거나 LAN과 WAN을 연결하기 위한 인터넷 네트워킹 장비**<br/> - 패킷의 위치를 추출하여, 그 위치에 대한 최적의 경로 지정<br/> - 그 경로를 따라 데이터 패킷을 다음 장치로 전송시킴<br/> - 라우팅 프로토콜은 경로 설정을 하여, 원하는 목적지까지 지정된 데이터가 안전하게 전달되도록 한다. |
| **게이트웨이**          | - **프로토콜을 서로 다른 통신망에 접속할 수 있게 해주는 장치**<br/> - LAN에서 다른 네트워크에 데이터를 보내거나,  **다른 네트워크로부터 데이터를 받아들이는 출입구 역할!** |
| **L3 스위치**           | - 3계층에서 네트워크 단위들을 연결하는 통신 장비<br/> - IP 레이어에서의 스위칭을 수행하여 외부로 전송<br/> - 라우터와의 경계가 모호함 |
| **백본망**(스위칭 허브) | - 광역 네트워크를 커버하는 스위칭 허브<br> ex) 경남권 스위칭, 부산권 스위칭 등 대단위 지역 커버 |
|                         |                                                              |

<br>

**4계층 장비 (전송 계층 : 송신, 수신 프로세스 간의 연결)**

| **장비**      | **설명**                                                     |
| ------------- | ------------------------------------------------------------ |
| **L4 스위치** | - 4계층에서 **네트워크 단위들을 연결하는 통신 장비**<br/> - TCP/UDP 등 스위칭 수행<br/> - FTP, HTTP 등을 구분하여 스위칭하는 로드 밸런싱 가능<br/> - 정교한 로드 밸런싱 불가 (애플리케이션 레이어에서 파악이 가능한 이메일 내용 등)<br/> - 4계층 정보인 TCP/UDP 포트번호를 분석하여 포워딩을 결정하고, QoS와 GLB/SLB 기능을 제공하는 스위치 |

 

---

### 데이터 전송방식

**회선교환**

* 종단 시스템간에 통신을 제공하기 위해 경로상 필요한 자원(버퍼, 링크전송률)은 통신 세션(session) 동안에 예약

  * 네트워크는 송신자와 수신자의 연결을 설정 -> 네트워크 링크에 일정한 전송률(대역폭, bandwidth)을 예약
  * 대역폭이 송신자-수신자 연결을 위해 예약되므로 **일정한 전송률이 보장**

* 다중화

  * FDM(Frequency-Division Multiplexing)

    * 링크를 통해 설정된 연결들은 그 링크의 주파수 스펙트럼을 공유
    * 대역폭을 공유하기 때문에 대역폭을 분할해서 사용
  * TDM(Time-Division Multiplexing)

**패킷교환**

*  패킷 스위치는 저장 후 전달 전송(store-and-forward transmission) 방식을 이용.
*  저장 후 전달은 스위치가 출력 링크로 패킷의 첫 비트를 전송하기 전에 전체 패킷을 받아야 함을 의미
*  큐잉 지연
   *  각 패킷 스위치는 여러 개의 링크를 갖고 있다. 각 링크에 대해 패킷 스위치는 출력 버퍼(큐)를 가지고 있다. 출력 버퍼에서 그 링크로 송신하려고 하는 패킷을 저장한다. 큐잉 지연은 링크가 어떤 패킷을 전송하고 있다면 다음 패킷은 출력 버퍼에서 대기하는 과정에서 발생한다. store-and-forward transmission에서 스위치가 패킷을 다 저장할 때까지 기다리는 과정에서도 큐잉 지연이 발생한다.
*  패킷 손실
   *  큐잉 지연은 가변적이고 네트워크의 혼잡 정도에 따라 다르다. 버퍼의 공간이 한정적이기 때문에 버퍼가 꽉 찼을 경우, 패킷이 버퍼로 들어가지 못해 손실되는 패킷 손실(packet loss)이 발생한다. 패킷 손실은 도착하는 패킷이 폐기되거나 버퍼에 대기 중인 패킷을 drop함으로써 발생한다.
*  forwarding table
   *  각 라우터는 목적지 주소를 라우터의 출력 링크로 맵핑하는 전달 테이블(forwarding table)을 갖고 있다. 패킷이 라우터에 도착하면, 라우터는 올바른 출력 링크를 찾기위에 주소를 조사하고, 목적지 주소를 이용하여 전달 테이블을 검색한다. 인터넷은 여러 라우팅 프로토콜로 자동으로 전달 테이블을 설정한다.

**패킷교환이 더 효율적인 이유**

* 회선 교환의 경우 각각의 사용자에게 예약되어야한다. 반면에 패킷 교환은 요구할 때만 링크의 사용을 할당한다. 다시 말해서, 패킷 교환 방식에서 링크 전송 능력은 링크에 전송할 패킷을 가진 사용자만이 패킷마다 공유하기 때문에 더 효율이 높다고 할 수 있다.

---
